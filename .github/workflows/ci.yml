on:
  - pull_request
  - push

name: "Tests"

jobs:

  windows:
    name: "Tests"

    strategy:
      fail-fast: false
      matrix:
        os:
          - ubuntu-latest
          - windows-latest

    runs-on: ${{ matrix.os }}

    steps:
      - name: "Checkout"
        uses: actions/checkout@v3

      - name: "phpinfo"
        run: php -v

      - name: "phpinfo"
        if: runner.os == 'Linux'
        run: |
          which php
          readlink -f `which php`

      - name: "phpinfo"
        if: runner.os == 'Windows'
        shell: powershell
        run: Get-Command php.exe
          Get-ChildItem -Path c:\tools\php

      - name: "Install PHP"
        uses: shivammathur/setup-php@v2
        with:
          php-version: 7.4
          coverage: none

      - name: "phpinfo 2"
        if: runner.os == 'Linux'
        run: |
          which php
          readlink -f `which php`

      - name: "phpinfo 2"
        if: runner.os == 'Windows'
        shell: powershell
        run: | 
          Get-Command php.exe
          Get-ChildItem -Path c:\tools\php
